# shortcuts
#
# - definitions/<fieldname>/initialValues is an array with keys as locale code, like '_', 'fr', 'en', etc.
#   if no locale distingo is needed, the plain value can be used (it will be converted to ['_' => value])
# - same principle applies for expected/<fieldname> values (no locale == '_' locale)
#
# - expected values is an array, possibly with only one element
#   if only one value is expected, the plain value can be used (it will test with [value])
#
# - fieldType defaults to text
#
# - isMultiple defaults to false
#
# - possible fieldTypes are:
#   boolean, code, collection_path, color, date, date_time, entity, geo_point, html, ip, json, keyword, number, tag, textarea, text
#
# - documentation generation
#   Tests with an "about" section will be included in the documentation

exiftoolVersion:
    about:
        title: 'Check of integration "metadata-read"'
        description:
            'Extracting the `ExifTool:ExifToolVersion` metadata allows to ensure that the metadata-read.
            integration is functional.
            The metadata `ExifTool:ExifToolVersion` in always returned by exiftool.'
    definitions:
        exiftoolVersion:
            initialValues: '{ "type": "metadata", "value": "ExifTool:ExifToolVersion"}'
    metadata:
        'ExifTool:ExifToolVersion': '12.42'
    expected:
        exiftoolVersion: '12.42'

multi2mono:
    about:
        title: 'Multi-values metadata -> mono-value attribute ("metadata" method)'
        description:
            'Values will be separated by " ; "'
    definitions:
        Keywords:
            isMultiple: false
            initialValues: '{"type": "metadata", "value": "IPTC:Keywords"}'
    metadata:
        'IPTC:Keywords': ['dog', 'cat', 'bird']
    expected:
        Keywords: 'dog ; cat ; bird'

multi2multi:
    about:
        title: 'Multi-values metadata -> multi-values attribute ("metadata" method)'
    definitions:
        Keywords:
            isMultiple: true
            initialValues: '{"type": "metadata", "value": "IPTC:Keywords"}'
    metadata:
        'IPTC:Keywords': ['dog', 'cat', 'bird']
    expected:
        Keywords: ['dog', 'cat', 'bird']

multi2mono_template:
    about:
        title: 'Multi-values metadata -> multi-values attribute ("template" method)'
        description: '__warning__ : __Wrong__ usage of `getMetadata(...).value` (without "s")'
    definitions:
        Keywords:
            isMultiple: true
            initialValues: '{"type": "template", "value": "{{ file.getMetadata(''IPTC:Keywords'').value }}"}'
    metadata:
        'IPTC:Keywords': ['dog', 'cat', 'bird']
    expected:
        Keywords: 'dog ; cat ; bird'

multi2multi_template:
    about:
        title: 'Multi-values metadata -> multi-values attribute ("template" method)'
        description: 'Good usage of `getMetadata(...).values`'
    definitions:
        Keywords:
            isMultiple: true
            initialValues: '{"type": "template", "value": "{{ file.getMetadata(''IPTC:Keywords'').values | join(''\n'') }}"}'
    metadata:
        'IPTC:Keywords': ['dog', 'cat', 'bird']
    expected:
        Keywords: ['dog', 'cat', 'bird']

mono_multilingue:
    about:
        title: 'Mono-value multilocale'
    definitions:
        Copyright:
            initialValues:
                en: '{ "type": "template", "value": "(c) {{ file.getMetadata(''XMP-dc:Creator'').value }}. All rights reserved" }'
                fr: '{ "type": "template", "value": "(c) {{ file.getMetadata(''XMP-dc:Creator'').value }}. Tous droits réservés" }'
    metadata:
        'XMP-dc:Creator': 'Bob'
    expected:
        Copyright:
            en: '(c) Bob. All rights reserved'
            fr: '(c) Bob. Tous droits réservés'

multi_multilingue:
    about:
        title: 'Multi-values multilocale'
    definitions:
        Keywords:
            isMultiple: true
            initialValues:
                en: '{ "type": "metadata", "value": "XMP-dc:Subject" }'
                fr: '{ "type": "metadata", "value": "IPTC:SupplementalCategories" }'
    metadata:
        'XMP-dc:Subject': ['dog', 'cat', 'bird']
        'IPTC:SupplementalCategories': ['chien', 'chat', 'oiseau']
    expected:
        Keywords:
            en: ['dog', 'cat', 'bird']
            fr: ['chien', 'chat', 'oiseau']

