resources:
  App\Entity\Core\Workspace:
    shortName: workspace
    attributes:
      output: App\Api\Model\Output\WorkspaceOutput
      input: App\Api\Model\Input\WorkspaceInput
      normalization_context:
        groups:
          - workspace:index
    itemOperations:
      get:
        security: 'is_granted("READ", object)'
        normalization_context:
          groups:
            - workspace:read
      put:
        security: 'is_granted("EDIT", object)'
        normalization_context:
          groups:
            - workspace:read
      delete:
        security: 'is_granted("DELETE", object)'
      flush:
        controller: App\Controller\Core\FlushWorkspaceAction
        path: /workspaces/{id}/flush
        method: POST
        security: 'is_granted("EDIT", object)'
        read: true
    collectionOperations:
      get: ~
      get_by_slug:
        method: GET
        path: /workspaces-by-slug/{slug}
        controller: App\Controller\Core\GetWorkspaceBySlugAction
      post:
        security: 'is_granted("ROLE_ADMIN")'
        normalization_context:
          groups:
            - workspace:read
