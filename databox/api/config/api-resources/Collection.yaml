resources:
  App\Entity\Core\Collection:
    shortName: collection
    attributes:
      output: App\Api\Model\Output\CollectionOutput
      input: App\Api\Model\Input\CollectionInput
      normalization_context:
        enable_max_depth: true
        groups:
          - collection:index
          - collection:include_children
          - collection:2_level_children
    itemOperations:
      get:
        security: 'is_granted("READ", object)'
      delete:
        security: 'is_granted("DELETE", object)'
      put:
        security: 'is_granted("EDIT", object)'
      patch:
        security: 'is_granted("EDIT", object)'
      put_move:
        controller: App\Controller\Core\MoveCollectionAction
        security: 'is_granted("EDIT", object)'
        method: PUT
        deserialize: false
        path: /collections/{id}/move/{dest}
        openapi_context:
          parameters:
            - name: dest
              in: path
              required: true
              description: The destination collection ID
    collectionOperations:
      get: ~
      post:
        security_post_denormalize: 'is_granted("CREATE", object)'
