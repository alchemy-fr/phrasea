# Read the documentation: https://github.com/FriendsOfSymfony/FOSElasticaBundle/blob/master/doc/setup.md
fos_elastica:
    clients:
        default: { url: '%env(ELASTICSEARCH_URL)%' }
    indexes:
        asset:
            use_alias: true
            index_name: "asset_%kernel.environment%"
            settings:
                index:
                    analysis:
                        analyzer:
                            collection_path:
                                tokenizer: collection_path
                            text_fr:
                                type: custom
                                tokenizer: whitespace
                                filter:
                                    - worddelimiter
                                    - lowercase
                                    - stopwords_fr
                                    - snowball_fr
                                    - asciifolding
                                    - elision
                            text_en:
                                type: custom
                                tokenizer: whitespace
                                filter:
                                    - worddelimiter
                                    - lowercase
                                    - stopwords_en
                                    - snowball_en
                                    - asciifolding
                                    - elision
                            text_de:
                                type: custom
                                tokenizer: whitespace
                                filter:
                                    - worddelimiter
                                    - lowercase
                                    - stopwords_de
                                    - snowball_de
                                    - asciifolding
                                    - elision
                        tokenizer:
                            collection_path:
                                type: path_hierarchy
                                delimiter: /
                        filter:
                            elision:
                                type: elision
                                articles: [ l, m, t, qu, n, s, j, d ]
                            worddelimiter:
                                type: word_delimiter_graph
                                generate_word_parts: true
                                catenate_words: true
                                preserve_original: true
                            snowball_fr:
                                type: snowball
                                language: French
                            stopwords_fr:
                                type: stop
                                stopwords: [ _french_ ]
                                ignore_case: true
                            snowball_en:
                                type: snowball
                                language: English
                            stopwords_en:
                                type: stop
                                stopwords: [ _english_ ]
                                ignore_case: true
                            snowball_de:
                                type: snowball
                                language: German
                            stopwords_de:
                                type: stop
                                stopwords: [ _german_ ]
                                ignore_case: true
            properties:
                title:
                    type: text
                    analyzer: text_fr
                attributes:
                    type: object
                collectionPaths:
                    property_path: false
                    type: text
                    analyzer: collection_path
                privacy:
                    property_path: false
                    type: byte
                workspaceId:
                    type: keyword
                ownerId:
                    type: keyword
                users:
                    property_path: false
                    type: keyword
                groups:
                    property_path: false
                    type: keyword
                tags:
                    property_path: tagIds
                    type: keyword
                createdAt:
                    type: date
            persistence:
                driver: orm
                model: App\Entity\Core\Asset
                listener: { enabled: false }

        collection:
            use_alias: true
            index_name: "collection_%kernel.environment%"
            settings:
                index:
                    analysis:
                        analyzer:
                            collection_path:
                                tokenizer: collection_path
                        tokenizer:
                            collection_path:
                                type: path_hierarchy
                                delimiter: /
            properties:
                title: ~
                absolutePath:
                    type: text
                    analyzer: collection_path
                root:
                    type: boolean
                pathDepth:
                    type: integer
                privacy:
                    property_path: false
                    type: byte
                workspaceId:
                    type: keyword
                ownerId:
                    type: keyword
                users:
                    property_path: false
                    type: keyword
                groups:
                    property_path: false
                    type: keyword
            persistence:
                driver: orm
                model: App\Entity\Core\Collection
                listener: { enabled: false }
