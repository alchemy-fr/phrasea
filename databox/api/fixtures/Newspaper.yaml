parameters:
  user_admin: 97594c35-0486-48df-a581-734be0a9530e
  user_alice: b5bb691d-4a0b-447c-acc2-abed6b0d7887
  user_bob: 8a93be06-613d-4b32-8abb-7eb747898333
  user_jack: 74f21e72-3c42-4f17-abc3-e74ec61b0e15

App\Entity\Core\Workspace:
  w_newspaper:
    name: Newspaper
    slug: newspaper
    ownerId: super_user

App\Entity\Core\AttributeDefinition:
  attribute_definition (template):
    workspace: '@w_newspaper'

  ad_desc (extends attribute_definition):
    name: Description
  ad_keywords (extends attribute_definition):
    name: Keywords
    multiple: true
    facetEnabled: true

App\Entity\Core\RenditionClass:
  rendition_class (template):
    workspace: '@w_newspaper'

  n_rc_public (extends rendition_class):
    name: Public
  n_rc_restricted (extends rendition_class):
    name: Restricted

App\Entity\Core\RenditionDefinition:
  rendition_definition (template):
    workspace: '@w_newspaper'

  n_rd_original (extends rendition_definition):
    name: original
    class: '@n_rc_public'
    useAsOriginal: true
  n_rd_preview (extends rendition_definition):
    name: preview
    class: '@n_rc_public'
    useAsPreview: true
  n_rd_thumbnail (extends rendition_definition):
    name: thumbnail
    class: '@n_rc_public'
    useAsThumbnail: true
  n_rd_preview_mobile (extends rendition_definition):
    name: preview_mobile
    class: '@n_rc_public'
    useAsPreview: true
    priority: 1
  n_rd_thumbnail_mobile (extends rendition_definition):
    name: thumbnail_mobile
    class: '@n_rc_public'
    useAsThumbnail: true
    priority: 1
  n_rd_thumbnailActive (extends rendition_definition):
    name: thumbnailActive
    class: '@n_rc_public'
    useAsThumbnailActive: true

# Groups:
# reporter_sport_football_league
#   - alice
#   - harry
# reporter_sport_football_worldcup
#   - bob
# reporter_sport_football
#   - jack
# reporter_sport_tennis
#   - amelia
#   - harry
#   - oliver
# reporter_entertainment
#   - ava
# admin_newspaper
#   - oliver
# No group:
#   - john_doe
#   - super_user

# Collections hierarchy:
# sport
#   football
#     league
#     worldcup
#   rugby
#   tennis
# entertainment
#   public_videos
#     movies
#     series
#     tv_shows
#   archives
#     movies
#     series
#     tv_shows
# others

App\Entity\Core\Collection:
  collection (template):
    workspace: '@w_newspaper'
    ownerId: <{user_admin}>

  c_{sport, entertainment} (extends collection):
    title: '<ucwords($current)>'

  c_sport_{football, rugby, tennis} (extends collection):
    parent: '@c_sport'
    title: '<ucwords($current)>'

  c_sport_football_{league, worldcup} (extends collection):
    parent: '@c_sport_football'
    title: '<ucwords($current)>'

  c_entertainment_{archives} (extends collection):
    parent: '@c_entertainment'
    title: '<ucwords($current)>'

  c_entertainment_{public_videos} (extends collection):
    ownerId: <{user_alice}>
    privacy: 3
    parent: '@c_entertainment'
    title: '<ucwords($current)>'

  c_entertainment_public_videos_{movies, series, shows} (extends collection):
    ownerId: <{user_alice}>
    parent: '@c_entertainment_public_videos'
    title: '<ucwords($current)>'

  c_entertainment_archives_{movies, series, shows} (extends collection):
    ownerId: <{user_alice}>
    parent: '@c_entertainment_archives'
    title: '<ucwords($current)>'

App\Entity\Core\Asset:
  asset (template):
    workspace: '@w_newspaper'
    privacy: '<numberBetween(1, 5)>'
    __calls:
      - addToCollection: ['@c_*']
      - addTag (80%?): ['@tag_*']
      - addTag (50%?): ['@tag_*']
      - addToCollection (80%?): ['@c_sport', true]
      - addToCollection (80%?): ['@c_entertainment_archives_movies', true]
      - addToCollection (80%?): ['@c_entertainment_archives_series', true]

  a_img{1..50} (extends asset):
    title: 'Image #<ucwords($current)>'
    ownerId: <{user_bob}>
  a_audio{1..10} (extends asset):
    title: 'Audio #<ucwords($current)>'
    ownerId: <{user_bob}>
  a_video{1..10} (extends asset):
    title: 'Video #<ucwords($current)>'
    ownerId: <{user_alice}>
  a_pdf{1..10} (extends asset):
    title: 'PDF #<ucwords($current)>'
    ownerId: <{user_jack}>

App\Entity\Core\File:
  file (template):
    workspace: '@w_newspaper'
    storage: s3_main
    pathPublic: '95%? true : false'

  f_img_o{1..50} (extends file):
    type: image/jpeg
    path: '<imageUrlRandomRatio(@w_newspaper->id, <current()>, 1000)>'
  f_img_p{1..50} (extends file):
    type: image/jpeg
    path: '<imageUrlRandomRatio(@w_newspaper->id, <current()>, 500)>'
  f_img_t{1..50} (extends file):
    type: image/jpeg
    path: '<imageUrlRandomRatio(@w_newspaper->id, <current()>, 200)>'
  f_img_ta{1..10} (extends file):
    type: image/jpeg
    path: '<imageUrlRandomRatio(@w_newspaper->id, <current()> + 1, 200)>'
  f_audio_o{1..10} (extends file):
    type: audio/mp3
    path: '<randomMedia(@w_newspaper->id, "mp3", <current()>)>'
  f_audio_t{1..10} (extends file):
    type: audio/mp3
    path: '<randomMedia(@w_newspaper->id, "mp3", <current()>)>'
  f_video_o{1..10} (extends file):
    type: video/mp4
    path: '<randomMedia(@w_newspaper->id, "mp4", <current()>)>'
  f_video_p{1..10} (extends file):
    type: video/mp4
    path: '<randomMedia(@w_newspaper->id, "mp4", <current()>)>'
  f_video_t{1..10} (extends file):
    type: video/mp4
    path: '<randomMedia(@w_newspaper->id, "mp4", <current()>)>'
  f_pdf_o{1..10} (extends file):
    type: application/pdf
    path: '<randomMedia(@w_newspaper->id, "pdf", <current()>)>'
  f_pdf_p{1..10} (extends file):
    type: application/pdf
    path: '<randomMedia(@w_newspaper->id, "pdf", <current()>)>'

App\Entity\Core\AssetRendition:
  asset_rendition (template):
    ready: true

  ar_img_o{1..50} (extends asset_rendition):
    definition: '@n_rd_original'
    file: '@f_img_o<current()>'
    asset: '@a_img<current()>'
  ar_img_p{1..50} (extends asset_rendition):
    definition: '@n_rd_preview'
    file: '@f_img_p<current()>'
    asset: '@a_img<current()>'
  ar_img_t{1..50} (extends asset_rendition):
    definition: '@n_rd_thumbnail'
    file: '@f_img_t<current()>'
    asset: '@a_img<current()>'
  ar_img_ta{1..10} (extends asset_rendition):
    definition: '@n_rd_thumbnailActive'
    file: '@f_img_ta<current()>'
    asset: '@a_img<current()>'
  ar_audio_o{1..10} (extends asset_rendition):
    definition: '@n_rd_original'
    file: '@f_audio_o<current()>'
    asset: '@a_audio<current()>'
  ar_audio_t{1..10} (extends asset_rendition):
    definition: '@n_rd_thumbnail'
    file: '@f_audio_t<current()>'
    asset: '@a_audio<current()>'
  ar_video_o{1..10} (extends asset_rendition):
    definition: '@n_rd_original'
    file: '@f_video_o<current()>'
    asset: '@a_video<current()>'
  ar_video_p{1..10} (extends asset_rendition):
    definition: '@n_rd_preview'
    file: '@f_video_p<current()>'
    asset: '@a_video<current()>'
  ar_video_t{1..10} (extends asset_rendition):
    definition: '@n_rd_thumbnail'
    file: '@f_video_t<current()>'
    asset: '@a_video<current()>'
  ar_pdf_o{1..10} (extends asset_rendition):
    definition: '@n_rd_original'
    file: '@f_pdf_o<current()>'
    asset: '@a_pdf<current()>'
  ar_pdf_p{1..10} (extends asset_rendition):
    definition: '@n_rd_preview'
    file: '@f_pdf_p<current()>'
    asset: '@a_pdf<current()>'

App\Entity\Core\Attribute:
  attribute (template):
    origin: 0

  at_desc_{@a_*} (extends attribute):
    definition: '@ad_desc'
    asset: '@a_*'
    value: '<text()>'

  at_kw_{@a_*} (extends attribute):
    definition: '@ad_keywords'
    asset: '@a_*'
    value: '<word()>'

App\Entity\Core\RenditionRule:
  rr:
    userType: 0
    objectType: 0
    objectId: '@w_newspaper->id'
    allowed:
      - '@n_rc_public'

App\Entity\Core\Tag:
  tag_{offline, online, embargo_it, embargo_fr}:
    name: '<current()>'
    workspace: '@w_newspaper'
