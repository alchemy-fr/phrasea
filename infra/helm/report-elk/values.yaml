
# https://github.com/elastic/helm-charts/blob/master/logstash/README.md
logstash:
  imageTag: latest
  image: alchemyfr/ps-report-logstash
  imagePullPolicy: Always
  extraEnvs:
    - name: ELASTICSEARCH_HOST
      value: elasticsearch-report:9200
    - name: POSTGRES_DATABASE
      value: report
  envFrom:
  - secretRef:
      name: postgresql-secret
  - configMapRef:
      name: postgresql-php-config

elasticsearch:
  nodeGroup: report
  elasticsearchHosts: 'http://elasticsearch-report:9200'
  clusterName: elasticsearch-report
  maxUnavailable: '' # Prevent conflict with others elasticsearch installs
  enabled: true
  replicas: 1
  minimumMasterNodes: 1
  volumeClaimTemplate:
    resources:
      requests:
        storage: 5Gi

kibana:
  kibanaConfig:
     kibana.yml: |
       server.name: kibana
       server.host: 0.0.0.0
       elasticsearch.hosts: [ "elasticsearch-report:9200" ]
       monitoring.ui.container.elasticsearch.enabled: false
       xpack.security.enabled: false
  extraEnvs:
    - name: ELASTICSEARCH_HOST
      value: elasticsearch-report:9200
  ingress:
    enabled: true
    hosts:
      - host: report-kibana.alchemy.kube
        paths:
          - path: /
    tls:
      - secretName: gateway-tls
        hosts:
          - report-kibana.alchemy.kube
