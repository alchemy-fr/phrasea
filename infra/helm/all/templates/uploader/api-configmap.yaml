{{- if .Values.uploader.enabled }}
{{- with .Values.uploader.api.config }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: uploader-api-config
data:
  ASSET_CONSUMER_COMMIT_URI: {{ quote .assetConsumerCommitUri }}
  ASSET_CONSUMER_ACCESS_TOKEN: {{ quote .assetConsumerAccessToken }}
  S3_STORAGE_ENDPOINT: {{ tpl .s3storage.endpoint }}
  S3_STORAGE_BASE_URL: {{ tpl .s3storage.baseUrl . | quote }}
  S3_STORAGE_BUCKET_NAME: {{ .s3storage.bucketName | quote }}
  S3_STORAGE_CNAME_IS_BUCKET: {{ ternary "\"true\"" "\"false\"" .s3storage.cnameIsBucket }}
{{- end }}
{{- end }}
