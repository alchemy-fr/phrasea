---
title: phrasea technical Prerequisites
status: WIP (Work In Progress)
slug: prerequisite
---
# Technical Prerequisites

## 1. Objective

Present the technical architecture of the Phrasea software solution.

This document describes the different modules that compose it, as well as the software dependencies and external services required for its implementation.

It is intended for:

* IT departments wishing to deploy Phrasea on their infrastructure  
* Application architects of projects wanting to integrate Phrasea  
* Technical architects of projects wanting to integrate Phrasea  

### 1. Deployment

#### Docker Compose

Allows rapid deployment of Phrasea in development or local environments. The stack includes external services such as **PostgreSQL**, **Redis**, **Elasticsearch**, and **Minio**. Thanks to Docker Compose **profiles**, you can select which services to start, offering great flexibility depending on the needs of each environment.

#### Kubernetes

Kubernetes is ideal for large-scale and production deployments. Phrasea uses Kubernetes to orchestrate containers and can also delegate parts of the stack to external services. It is highly recommended to delegate **primary datastores**, such as **PostgreSQL** and S3-type object storage (served by **Minio**), to external services for better performance and resilience management.

#### Note on Docker and Kubernetes deployments

The containers used in **Docker Compose** and the **Helm charts** provided with Phrasea are mainly intended for development and test environments. Additional customization is required to make these containers **production ready**. This includes optimizing configurations, securing access, managing resources, and implementing resilience and monitoring practices suitable for production. These adjustments are essential before any production deployment.

Depending on your scalability and infrastructure management requirements, you can choose the method that best fits your project.

#### Phrasea Application Source

The Phrasea application source code is available on GitHub:

* [**Application Source**](https://github.com/alchemy-fr/phrasea)

#### Deployment with Docker Compose

A Docker Compose file is available to facilitate Phrasea deployment in development environments:

* [**Docker Compose Deployment**](https://github.com/alchemy-fr/phrasea/blob/master/docker-compose.yml)

#### Deployment with Helm

For production deployments on Kubernetes, you can use the available Helm charts:

* [**Phrasea Helm Deployment**](https://github.com/alchemy-fr/alchemy-helm-charts-repo/tree/main/charts/phrasea)

#### List of Phrasea Docker Images

* **Dashboard**  
  [Dashboard Docker Image](https://hub.docker.com/repository/docker/alchemyfr/ps-dashboard/tags)

* **Keycloak**  
  [Keycloak Docker Image](https://hub.docker.com/repository/docker/alchemyfr/ps-keycloak/tags)  
  [Configurator Docker Image](https://hub.docker.com/repository/docker/alchemyfr/ps-configurator)

* **Databox Service**  
  [Databox PHP API](https://hub.docker.com/r/alchemyfr/ps-databox-api-php/tags)  
  [Databox Worker](https://hub.docker.com/r/alchemyfr/ps-databox-worker/tags)  
  [Databox Client](https://hub.docker.com/repository/docker/alchemyfr/ps-databox-client/tags)  
  [Databox Nginx API](https://hub.docker.com/repository/docker/alchemyfr/ps-databox-api-nginx/tags)

  Databox indexer (local build only)

* **Uploader Service**  
  [Uploader PHP API](https://hub.docker.com/r/alchemyfr/ps-uploader-api-php/tags)  
  [Uploader Worker](https://hub.docker.com/r/alchemyfr/ps-uploader-worker/tags)  
  [Uploader Client](https://hub.docker.com/repository/docker/alchemyfr/ps-uploader-client/tags)  
  [Uploader Nginx API](https://hub.docker.com/repository/docker/alchemyfr/ps-uploader-api-nginx/tags)

* **Expose Service**  
  [Expose PHP API](https://hub.docker.com/r/alchemyfr/ps-expose-api-php/tags)  
  [Expose Worker](https://hub.docker.com/r/alchemyfr/ps-expose-worker/tags)  
  [Expose Client](https://hub.docker.com/repository/docker/alchemyfr/ps-expose-client/tags)  
  [Expose Nginx API](https://hub.docker.com/repository/docker/alchemyfr/ps-expose-api-nginx/tags)

* **Novu Notification Service**

  [Novu-bridge](https://hub.docker.com/r/alchemyfr/ps-novu-bridge/tags) 

  Notification service in SaaS or hosted locally

  The Novu-bridge container must be deployed in the stack.

  - For the Backend service, you can use Novu's SaaS service  
  - or deploy a Novu Backend stack (no Helm deployment provided, only Docker Compose for development). No authentication information passes through this stack.

* **Report Service**  
  [Report API](https://hub.docker.com/repository/docker/alchemyfr/ps-report-api/tags)

1. **traefik**  
   Images referenced in the Docker Compose and Helm stack are **not Phrasea images generated by Alchemy**, but are necessary for development or test deployments. As previously explained, these images are intended to be replaced by external services.
2. Networking  
3. **.5.5** – Traefik, a reverse proxy and load balancer including Let's Encrypt certification for certain providers

   Primary Datastores

4. **postgres:14.4-alpine** – PostgreSQL, relational database.
5. **minio/minio**  
   **.2021-11-24T23-19-33Z.hotfix.1d85a4563** – MinIO, S3-compatible object storage service.

   Cache Server and Data Bus

6. **redis:5.0.5-alpine** – Redis, in-memory database for cache management.
7. **rabbitmq:3.7.14-management** – RabbitMQ, message queue management service.
8. **elasticsearch:7.17.3** – Elasticsearch, distributed search and analytics engine.
9. **quay.io/soketi/soketi:330e1a60197d2b5798a3b3a2bcd211ec124148d8-16-alpine** – Soketi, a WebSocket server.

   Additional tools for development and test stack:

10. **mariadb:10.4.10-bionic** – MariaDB, relational database server used for local Matomo stack deployment.
11. **dpage/pgadmin4:8.6** – PgAdmin, management tool for PostgreSQL.
12. **phpmyadmin/phpmyadmin** – PhpMyAdmin, management tool for MySQL/MariaDB.
13. **mailhog/mailhog** – MailHog, SMTP server for capturing emails in development.
14. **elastichq/elasticsearch-hq** – Elasticsearch HQ, interface for querying Elasticsearch.
15. **grafana/k6:0.26.2** – k6, performance load testing tool.
16. **influxdb:1.8** – InfluxDB, time series database.
17. **grafana/grafana:8.4.2** – Grafana, data visualization platform.
18. **mendhak/http-https-echo:23** – HTTP/HTTPS echo service for testing.
19. **jwilder/dockerize:0.6.1** – Dockerize, utility for orchestrating Docker services.
20. **minio/mc .2020-09-18T00-13-21Z** – MinIO Client, management utility for MinIO.
21. **Novu** back-end infrastructures

## 2. Technologies Used

### Back-end

* Programming Language:  
  * Phrasea is developed in PHP with the Symfony Framework.  
  * NodeJs for certain modules (indexer)

### Front-End

* Web Technologies:  
  * HTML5, CSS3, and JavaScript are the foundation of the user interface, enabling interactive and accessible web interfaces.  
* JavaScript Framework:  
  * Material UI and React for clients consuming the Phrasea API.

### Database

* Relational DBMS:  
  * PostgreSQL is the relational database that stores and/or references the various Phrasea objects. It is a primary datastore; containers used in the Docker or K8s stack are only for development and testing, an external service is recommended in production.  
    The database server contains one database per service:  
    Configurator Database  
    Keycloak Database  
    Databox Database  
    Uploader Database  
    Expose Database  
    Report Database

### Search Engine

* Elasticsearch:  
  * To optimize search and indexing of assets/collections and scalability, Phrasea uses Elasticsearch.  
  * Denormalization of objects contained in the DBMS is performed in different indexes, allowing textual searches on relevant objects.

### File Management and Storage

* Object Storage:  
  * S3-type object storage is used to store assets and renditions. It is a primary datastore; Minio used in the Docker or K8s stack is only for development and testing, an external service and backup solution is recommended in production.  
  * Network Attached Storage, NFS, or other shared storage solutions are used for local storage of temporary files.

### User Management and Security

* Identity Management System (IAM)

Integration of Keycloak in Phrasea

Authentication and Authorization

* Keycloak supports user authentication via standard protocols like OAuth2, OpenID Connect, and SAML. This facilitates integration with web, mobile applications, and APIs.  
* Keycloak allows role-based authorization management, offering granular user permission management, which can be aligned with roles defined in the Phrasea database (administrators, editors, viewers, etc.).

User and Group Management

* Keycloak manages users and groups, allowing segmentation based on needs. Each user can be assigned to one or more groups, and permissions can be attributed to these groups.  
* User information (such as email addresses, usernames, and roles) can be synchronized with Phrasea, ensuring a smooth and centralized user experience.

Single Sign-On (SSO)

* Keycloak provides SSO, allowing users to log in once to access all Phrasea-related applications, both internal and external. This improves user experience and simplifies session management.  
* User sessions can be managed centrally, and Keycloak also allows session revocation if needed (e.g., when a user leaves the organization).

Federation and Integration with External IdPs

* Keycloak can connect to external identity providers (IdP) such as Microsoft Active Directory, or other SAML and OpenID Connect compatible providers. This allows using existing identities without creating new accounts for Phrasea.  
* Federation simplifies authentication for organizations already using other IAM systems.

Advanced Security Features

* Multi-factor authentication (MFA): Keycloak supports two-factor authentication, enhancing security by requiring a second verification (such as a mobile app or token).  
* Session and token management: Keycloak allows configuring session and token lifetimes and can force token revocation in case of compromise.  
* Audit and Logs: Keycloak provides logging capabilities to track logins, authentication failures, and other security events, which is essential for compliance requirements.

Configuration

* When deploying the stack, Phrasea runs a configurator that sets up a realm and clients dedicated to this installation. These clients are used by the various Phrasea services.  
* A root Keycloak account and a master admin account for the application are also initialized.  
* Interconnections with the client's IdP are declared manually at a later stage.  
* Phrasea can be configured with OAuth2 or OpenID Connect for user authentication, centralizing identity management and facilitating integration with third-party providers.

Encryption

* Data in transit is encrypted via TLS/SSL to secure communications between users and the application.

## 2. Phrasea Architecture Diagram

![Technical Information](technical-information.svg)

## 3. Infrastructure Capacity Prerequisites

Capacity prerequisites are minimum data to be adapted according to the platform's purpose; they are given as an indication and require adaptation to the final usage context.

Metrics to consider:

- Phrasea service implemented  
- Number of simultaneous write users  
- Number of simultaneous read users  
- Storage volume for documents  
- Document index volume  
- Number of renditions to generate  
- Number of expected versions per document  
- Number of parallelized processes implemented  
- Desired SLA  
- Log retention duration

### Development and Test

CPU: 6 CPU  
RAM: 16 GB  
Disk capacity for Docker image management: 100 GB  
Disk capacity for temporary volumes: 100 GB

### Production

#### Phrasea images deployed with Docker Compose and/or Helm

CPU: 6 CPU  
RAM: 16 GB  
Disk capacity for Docker image management: 100 GB  
Disk capacity for temporary volumes: 100 GB

#### Managed Service

- PostgreSQL:

  - CPU: 2 CPU
  - RAM: 8 GB
  - Disk: 50 GB

- Object Storage:

  - not applicable

## 4. Deployment Orchestration

### Docker Compose Prerequisites

  - docker version: 28.5.2  
  - docker compose: 2.40.3  

### Kubernetes Helm Prerequisites

  - Kubernetes version: 1.29  
  - Helm Version: v3.17.1  
