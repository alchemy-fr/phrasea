services:
  _defaults:
    autowire: true
    autoconfigure: true

  alchemy.webhook_client:
    class: GuzzleHttp\Client

  Alchemy\WebhookBundle\Form\EventsChoiceType:
    arguments:
      $events: '%alchemy_webhook.events%'

  Alchemy\WebhookBundle\Consumer\WebhookTriggerHandler:
    arguments:
      $client: '@alchemy.webhook_client'
    tags: ['arthem_rabbit.event_handler']

  Alchemy\WebhookBundle\Consumer\SerializeObjectHandler:
    tags: ['arthem_rabbit.event_handler']

  Alchemy\WebhookBundle\Consumer\WebhookHandler:
    tags: ['arthem_rabbit.event_handler']

  Alchemy\WebhookBundle\Doctrine\Listener\EntityListener:
    arguments:
      $config: '%alchemy_webhook.listener_config%'
    tags: ['doctrine.event_subscriber']

  Alchemy\WebhookBundle\Doctrine\EntitySerializer: ~
